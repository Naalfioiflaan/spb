{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelola Pengguna</title>
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'main.css' %}">
</head>
<body>

    <!-- header -->
    <div>
        <div class="bg-color-blue bg-body-tertiary ff-source-sans" >
            <!-- navbar -->
            <div class="container-fluid">
                <div class="row align-items-center pt-2 pb-2">
                    <div class="col-3 px-1">
                        <a href="#" class="pull-left mt-2"><img src="{% static '/img/logo_bps.png'%}" alt="logo_bps" style="width: 250px;"></a> 
                    </div>
                    <div class="col-6 navbar d-flex justify-content-center">
                      <ul class="nav nav-pills text-light">
                        <li class="nav-item">
                            <a class="nav-link text-light" href="{% url 'index' %}">
                                <span><iconify-icon inline icon="material-symbols:dashboard"></iconify-icon></span>
                                &nbsp;Dashboard</a>
                        </li>
                        <li class="nav-item mx-5">
                            <a class="nav-link text-light" href="{% url 'klasifikasi_berita' %}">
                              <span><iconify-icon inline icon="material-symbols:newspaper-rounded" style="font-size: 20px;"></iconify-icon></span>
                              &nbsp;Klasifikasi Berita</a>
                          </li>
                        <li class="nav-item">
                            <a class="nav-link active" style="background-color: #367B99;" aria-current="page" href="#">
                                <span><iconify-icon inline icon="mdi:users-group" style="font-size: 20px;"></iconify-icon></span>
                            Kelola Pengguna</a>
                        </li>
                      </ul>
                    </div>
                    <div class="col-3 px-4">
                      <div class="dropdown d-flex justify-content-end align-items-center">
                        <img src="{% static '/img/pp.jpg'%}" alt="foto profil user" class="rounded-circle border border-2 mx-2" style="border-color: #0F8DC6!important; width: 2rem; height: 2rem;">
                        <a class="dropdown-toggle text-light" style="text-decoration: none;" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          {{user.username}}
                        </a>
                        <ul class="dropdown-menu shadow">
                          <li style="text-align: center; margin-top: 8px; margin-bottom: 5px"><img src="{% static '/img/pp.jpg'%}" alt="foto profil user" class="rounded-circle border border-2 mx-2" style="border-color: #0F8DC6!important; width: 3rem; height: 3rem;"></li>
                          <li><a class="dropdown-item fw-bold mt-2 mb-0" style="text-align: center;" >{{user.username}}</a></li>
                          <li style="text-align: center;" ><a class="dropdown-item mt-0 mb-2 py-0" style="color: #807B7B; font-size: 14px;">{{user.username}}</a></li>
                          <li style="text-align: center;"><a class="dropdown-item">
                            <div class="btn btn-success rounded-pill text-dark ff-source-sans py-1" type="button" style="font-weight: 700; font-size: 13px;">Admin</div></a>
                          </li>
                          <hr class="mt-2 mb-2 my-1">
                          <li>
                            <a class="nav-link fw-bold d-flex align-items-center ms-3" href="{% url 'login' %}" style="color: #807B7B; font-size: 14px;">
                              <span><iconify-icon inline icon="material-symbols:logout" style="font-size: 25px;"></iconify-icon></span>
                              &nbsp;Log Out</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                </div>
            </div>
          </div>
    </div>

    <!-- tulisan kelola pengguna -->
    <div class="container-fluid ">
        <div class="row d-flex justify-content-start text-start mt-4 ms-5 px-5">
          <h4 class="ff-source-sans text-dark" style="font-weight: 700;">
            <span><iconify-icon inline icon="mdi:users-group" style="font-size:27px;"></iconify-icon></span>&nbsp; Kelola Pengguna
          </h4>
        </div>
      </div>

    <!-- search dan tambah pengguna -->
    <div class="container-fluid">
        <div class="row justify-content-end mx-5 px-5">
            <div class="col-10 d-flex justify-content-end px-0">
                <div class="mx-3">
                    <form role="search">
                        <input class="form-control w-100 border" style="border-color: #AFAAAA !important;" type="search" placeholder="Cari Pengguna" aria-label="Search" style="background-color: #ECECEC;">
                    </form>
                </div>
                <button type="button" class="btn btn-warning text-light ff-source-sans" style="background-color: #E18F2C;">
                    <span><iconify-icon inline icon="material-symbols:add-circle" style="font-size:20px;"></iconify-icon></span>&nbsp;Tambah Pengguna
                </button>
            </div>
        </div>
    </div>

    <!-- card tabel data penggguna-->
    <div class="container-fluid">
        <div class="row d-flex align-item-center justify-content-center mx-5 mb-5 my-3 px-5">
          <div class="card d-flex shadow" style="background-color: #ECECEC;">
            
            <!--baris tulisan Daftar Pengguna -->
            <div class="row mt-3 ms-1">
              <h4 class="ff-source-sans text-dark" style="font-weight: 700;" >Daftar Pengguna</h4>
            </div>
  
            <!-- tabel -->
            <table class="table mt-4">
              <!-- nama kolom -->
              <thead>
                <tr>
                  <div class="d-flex justify-content-center align-items-center">
                    <th scope="col">Nama</th>
                    <th scope="col">Status</th>
                    <th scope="col">Aksi</th>
                  </div>
                </tr>
            </thead>
              <!-- data -->
              <tbody>
                <tr class="ff-source-sans" style="color: #807B7B; font-size: 14px; background-color: #E6E6E6 !important;">
                    <td>
                        Menampilkan 2 dari Total {{total_pengguna}} Pengguna
                    </td>
                    <td></td><td></td><td></td>
                </tr>
                {%for pengguna in list %}
                <tr class="ff-source-sans">
                  <td >
                    <div class="row">
                        <div class="col-2 ms-3 d-flex align-items-center">
                            <img src="{% static '/img/pp.jpg'%}" alt="foto profil user" class="rounded-circle border border-2 mx-2" style="border-color: #0F8DC6!important; width: 2rem; height: 2rem;">
                        </div>
                        <div class="col ms-3">
                          <p class="m-0" style="font-size: 1rem;">
                            {{pengguna.username}}
                          </p>
                        <a href="" style="color: #777777; text-decoration: none; font-size: 1rem;">{{pengguna.email}}</a>
                        </div>
                    </div>
                  </td>
                  <td class="pt-3">
                    {% if pengguna.is_staff %}
                    <div class="btn btn-success rounded-pill text-dark ff-source-sans py-1" type="button" style="font-weight: 700; font-size: 13px;">Admin</div></a>
                    {% else %}
                    <div class="btn btn-warning rounded-pill text-dark ff-source-sans py-1" type="button" style="font-weight: 700; font-size: 13px;">User</div></a>
                    {% endif %}
                  </td>
                  <td class="align-items-center pt-3">
                    <div class="dropdown">
                      <button class="btn dropdown-toggle" data-bs-toggle="dropdown">
                        <span><iconify-icon inline icon="material-symbols:settings" style="font-size:16px;"></iconify-icon></span>
                        &nbsp;Ubah Status</button>
                      <ul class="dropdown-menu" style="background-color: #ECECEC">
                        <li><a class="dropdown-item" href="/update_status_pengguna/{{pengguna.id}}?is_staff=1">Admin</a></li>
                        <li><a class="dropdown-item" href="/update_status_pengguna/{{pengguna.id}}?is_staff=0">User</a></li>
                      </ul>
                    </div>
                    </td>
                    <td class="align-items-center pt-4">
                      <a href="/remove_pengguna/{{pengguna.id}}/" style="font-size: 1rem; text-decoration: none; color: black;">
                        <span><iconify-icon inline icon="ic:baseline-remove-circle" style="font-size:18px;"></iconify-icon></span>
                        &nbsp;Hapus Pengguna
                        </a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>

    <!-- Pagination -->
    <div class="container-fluid">
      <nav class="ff-source-sans me-3" aria-label="Page navigation example" style="font-weight:600;">
          <ul class="pagination h-100 align-items-center justify-content-end" id="pagination">
          <li class="page-item h-100"><a class="page-link h-100" href="?page=1">Awal</a></li>
          {% if list.has_previous %}
          <li class="page-item h-100">
              <a class="page-link h-100" href="?page={{list.previous_page_number}}" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
              </a>
          </li>
          {% endif %}
          <li class="page-item h-100">
              <label class="page-link h-100" style="font-size: .78rem;">Page 
              <input class="page-input" type="text" id="page-input" value="{{list.number}}"/>
              of {{list.paginator.num_pages}}
              </label>
          </li>
          {% if list.has_next %}
          <li class="page-item h-100">
              <a class="page-link h-100" href="?page={{list.next_page_number}}" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
              </a>
          </li>
          {% endif %}
          <li class="page-item h-100"><a class="page-link h-100" href="?page={{list.paginator.num_pages}}">Akhir</a></li>
          </ul>
      </nav>
      </div>
  
      <!-- footer -->
      <div class="text-center mt-5 mb-3 ff-source-sans pt-5" style="color: #777777 ;">
      Copyright Â© 2023 - All right reserved by MBKM Mandiri - BPS Provinsi Riau & Universitas Riau 2023
      </div>

    <script src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'bootstrap/js/popper.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
    
</body>
</html>